{% extends "base.html" %}

{% load static from staticfiles %}

{% block title %}Expense List{% endblock %}

{% block content %}

	<div class='row margin-bottom margin-top'>
		<div class='small-6 columns'>
			<p class="text-center show-for-medium"><button class='button' onClick="addExpense()">Add an expense <i class="fi-plus"></i></button></p>
			<p class="text-center hide-for-medium"><button class='button' onClick="addExpense()"><i class="fi-plus"></i></button></p>
		</div>
		{% if expenses %}	
		<div class='small-4 columns'>
			<p class="text-center show-for-medium"><a class='button' href="{% url 'print-expense-list' %}"><i class="fi-page-pdf"></i> Export pdf</a></p>
			<p class="text-center hide-for-medium"><a class='button' href="{% url 'print-expense-list' %}"><i class="fi-page-pdf"></i></a></p>
		</div>
		{% endif %}
	</div>

{% if expenses %}
<div class='row margin-bottom margin-top'>
        <table>
                <thead>
                        <tr>
                                <th class='text-center'>Date</th>
                                <th class='text-center'>Third Party</th>
                                <th class='text-center'>Amount</th>
				<th class='text-center'>Payment Mode</th>
				<th class='text-center'>Notes</th>
                        </tr>
                </thead>
                <tbody>
                        {% for expense in expenses %}
                                <tr>
                                        <td class='text-center'>{{ expense.date_expense }}</td>
					<td class='text-center'>{{ expense.third_party }}</td>
					<td class='text-center'>{{ expense.amount }}</td>
					<td class='text-center'>{{ expense.payment_mode }}</td>
					<td class='text-center'>{{ expense.notes }}</td>
                                </tr>
                        {% endfor %}
                </tbody>
        </table>
</div>
{% else %}
        <h1 class=" text-center subheader">Vous n'avez pas encore de d√©penses ! Allez au boulot ! ;)</h1>
{% endif %}

	<div class="reveal" id="addExpenseForm" data-reveal data-multiple-opened="true">
	</div>

{% endblock %}

{% block javascript %}
	<script type="text/javascript">
		function addExpense() {
			$.ajax('{% url 'expense-create' %}')
			.done(function(resp){
				$("#addExpenseForm").html(resp).foundation('open');
			});
		}
	</script>
{% endblock %}